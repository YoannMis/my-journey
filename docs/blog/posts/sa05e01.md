---
date:
  created: 2025-10-13
---

# **ğŸ“… AISON A Semaine 5 Ã‰pisode 1 - Le DOM**

## **ğŸ“š Notions du jour**

+ DOM (Document Object Model),
+ Expliquer le principe du DOM,
+ AccÃ©der Ã  un Ã©lÃ©ment de la page en JS (getElement(s)By, querySelectorâ€¦),
+ Modifier un Ã©lÃ©ment de la page (objet HTMLElement),
+ CrÃ©er un Ã©lÃ©ment,
+ InsÃ©rer un Ã©lÃ©ment dans un autre,
+ Utiliser la documentation pour connaitre les actions possibles avec un Ã©lÃ©ment.

<!-- more -->

---

### **ğŸŒ Le DOM : Le Lien Magique entre HTML et JavaScript**

Aujourdâ€™hui, jâ€™ai plongÃ© dans lâ€™un des concepts les plus fondamentaux du dÃ©veloppement web : **le [DOM](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model)**, ou *Document Object Model*. En gros, le DOM est une **reprÃ©sentation en mÃ©moire** de la structure de votre page HTML, sous forme dâ€™un arbre dâ€™objets. Chaque balise HTML (un `<div>`, un `<p>`, etc.) devient un **nÅ“ud** dans cet arbre, et JavaScript peut interagir avec ces nÅ“uds pour **modifier dynamiquement** la page.

**Pourquoi câ€™est puissant ?**
Sans le DOM, JavaScript ne pourrait pas rÃ©agir aux actions de lâ€™utilisateur (clics, saisiesâ€¦) ni mettre Ã  jour le contenu sans recharger la page. Câ€™est la base des **applications web dynamiques** !

---

### **ğŸ” AccÃ©der aux Ã‰lÃ©ments : Les SÃ©lecteurs, ces ClÃ©s dâ€™AccÃ¨s**

Pour manipuler un Ã©lÃ©ment, il faut dâ€™abord le **cibler**. JavaScript offre plusieurs mÃ©thodes :

+ **`getElementById()`** : RÃ©cupÃ¨re un Ã©lÃ©ment par son ID (unique).

  ```javascript
  const myTitle = document.getElementById("my-title");
  ```

+ **`getElementsByClassName()`** : RÃ©cupÃ¨re une liste dâ€™Ã©lÃ©ments par leur classe.
+ **`querySelector()`** : Utilise des sÃ©lecteurs CSS pour cibler un Ã©lÃ©ment (le premier trouvÃ©).

  ```javascript
  const firstLink = document.querySelector("a");
  ```

+ **`querySelectorAll()`** : Comme `querySelector`, mais retourne **tous** les Ã©lÃ©ments correspondants.

ğŸ’¡ *Astuce* : `querySelector` est ultra-flexible et permet des sÃ©lections complexes, comme `div > p.highlight`.

---

### **âœ¨ Modifier un Ã‰lÃ©ment : Lâ€™Objet HTMLElement**

Une fois lâ€™Ã©lÃ©ment ciblÃ©, on peut **lire ou modifier** ses propriÃ©tÃ©s et son contenu :

+ **Contenu texte** : `element.textContent` ou `element.innerHTML` (attention, ce dernier interprÃ¨te le HTML. Il peut insÃ©rer des balises `<script>` et ainsi laisser la porte ouverte pour une attaque XSS. PrÃ©fÃ©rer l'utilisation de `element.innerText`).
+ **Attributs** : `element.setAttribute("class", "class-name")`, `element.classList("class-name")`, `element.id = "id-name"`.
+ **Styles** : `element.style.color = "red"`.

Exemple :

```javascript
const button = document.querySelector("button");
bouton.textContent = "Click Me!";
bouton.style.backgroundColor = "#4CAF50";
```

---

### **ğŸ› ï¸ CrÃ©er et InsÃ©rer des Ã‰lÃ©ments : Construire la Page Dynamiquement**

JavaScript permet de **crÃ©er** des Ã©lÃ©ments et de les ajouter Ã  la page :

1. **CrÃ©er** un Ã©lÃ©ment :

   ```javascript
   const newParagraph = document.createElement("p");
   newParagraph.textContent = "Hello, world!";
   ```

2. **Lâ€™insÃ©rer** dans le DOM :

   + `parent.appendChild(newParagraph)` : Ajoute l'Ã©lÃ©ment en tant qu'enfant de l'Ã©lÃ©ment parent ciblÃ©.
   + `parent.insertBefore(newParagraph, elementReference)` : InsÃ¨re un nÅ“ud avant un *nÅ“ud de rÃ©fÃ©rence* en tant qu'enfant d'un *nÅ“ud parent spÃ©cifiÃ©*.

ğŸ’¡ *Cas pratique* : Ajouter une liste dâ€™items gÃ©nÃ©rÃ©e dynamiquement Ã  partir dâ€™un tableau JavaScript.

---

### **ğŸ“š La Documentation : Le Guide Ultime**

Le DOM est vaste, et personne ne retient tout ! La **[documentation MDN](https://developer.mozilla.org/fr/docs/Web/API/Document_Object_Model)** est une mine dâ€™or :

+ Elle liste **toutes les propriÃ©tÃ©s et mÃ©thodes** disponibles pour chaque type dâ€™Ã©lÃ©ment.
+ Exemples concrets et compatibilitÃ© navigateur.

ğŸ’¡ *Conseil* : Apprendre Ã  chercher efficacement dans la doc. Par exemple, taper "MDN HTMLElement" pour explorer les mÃ©thodes dâ€™un Ã©lÃ©ment.

---

### **ğŸ¯ Ce Que Je Retiens**

+ Le DOM est une **interface** entre HTML et JavaScript.
+ Les sÃ©lecteurs (`querySelector`, `getElementById`) sont essentiels pour cibler des Ã©lÃ©ments.
+ On peut **lire, modifier, crÃ©er, et supprimer** des Ã©lÃ©ments dynamiquement.
+ La documentation est **indispensable** pour dÃ©couvrir les possibilitÃ©s.

**Prochaine Ã©tape** : Explorer les Ã©vÃ©nements (`addEventListener`) pour rendre mes pages interactives !

---

## **âŒ¨ï¸ Challenge du jour**

### **ğŸ² Dice roller**

#### **ğŸ¯ But du Challenge**

CrÃ©er une application web interactive permettant de **simuler le lancer de dÃ©s ğŸ²ğŸ²** en JavaScript. Lâ€™objectif est de gÃ©nÃ©rer visuellement un ou plusieurs dÃ©s, dont la face est dÃ©terminÃ©e alÃ©atoirement, et dâ€™afficher ces dÃ©s dans lâ€™interface utilisateur. En bonus, le challenge propose dâ€™ajouter un adversaire (un deuxiÃ¨me joueur virtuel) pour comparer les lancers.

---

#### **ğŸ”— Lien avec les Notions du Jour**

Ce challenge met en pratique **toutes les notions clÃ©s du DOM** apprises aujourdâ€™hui :

+ **CrÃ©ation dâ€™Ã©lÃ©ments HTML** (`div`) via JavaScript.
+ **Manipulation des classes et styles** pour appliquer des styles CSS existants et afficher un sprite (image composite).
+ **Insertion dâ€™Ã©lÃ©ments dans le DOM** pour afficher les dÃ©s dans des zones spÃ©cifiques de la page.
+ **Modification dynamique des propriÃ©tÃ©s CSS** (comme la position de lâ€™arriÃ¨re-plan) pour changer la face du dÃ©.
+ **Interaction avec lâ€™utilisateur** via `prompt` pour personnaliser le nombre de dÃ©s lancÃ©s.
+ **Utilisation de la documentation** pour comprendre comment manipuler les Ã©lÃ©ments et leurs propriÃ©tÃ©s (comme `background-position`).

---

#### **ğŸ“‹ Ã‰tapes Ã  RÃ©aliser**

1. **CrÃ©ation dâ€™un DÃ© en JavaScript**
2. **GÃ©nÃ©ration dâ€™un Nombre AlÃ©atoire et Affichage de la Face du DÃ©**
3. **Lancer Plusieurs DÃ©s**
4. **Bonus : Ajouter un Adversaire**

---

#### **ğŸ’» Langage de Programmation UtilisÃ©**

Le challenge est entiÃ¨rement rÃ©alisÃ© en **JavaScript**, avec une interaction directe avec le **DOM** pour manipuler les Ã©lÃ©ments HTML et CSS. Le HTML et CSS sont fournis (ou peuvent Ãªtre gÃ©nÃ©rÃ©s dynamiquement en JavaScript pour sâ€™entraÃ®ner), mais la logique principale repose sur JavaScript. L'image *stripe* (contenant toutes les faces d'un dÃ©, chaque face faisant `100px` de largeur) Ã  manipuler pour afficher les dÃ©s est Ã©galement fournie.

---

#### **ğŸ§‘â€ğŸ’» Ma proposition de code pour ce challenge**

``` {.html .select title="index.html" linenums="1"}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/styles.css">
    <title>Roll</title>
</head>
<body>
    <div id="app">
        <div class="board" id="player"></div>
    </div>
    <script src="../js/app.js"></script>
</body>
</html>
```

``` {.js .select title="app.js" linenums="1"}

// Get the main board element from the DOM by its id 'app'
const boardElt = document.getElementById("app");
// Create a new div element to represent the dealer's board and add an id and class to it
const dealerElt = document.createElement("div");
dealerElt.classList.add("board");
dealerElt.id = "dealer";
// Append the dealer's board to the main board
boardElt.appendChild(dealerElt);

/**
 * Generates a dice for the specified player and appends it to the player's board.
 * The dice face is determined randomly between 1 and 6.
 * @param {string} player - The id of the player ('player' or 'dealer') to whom the dice will be added.
 */
function generateDice(player) {
  // Generate a random number between 1 and 6 to represent the dice value
  const diceValue = (Math.floor(Math.random() * 6) + 1);
  // Log the dice value to the console for debugging and check if the diceValue corresponds to the correct dice face displayed
  console.log(diceValue);
  // Create a new div element to represent the dice
  const diceElt = document.createElement("div");
  diceElt.classList.add("dice");
  // Get the player's board element by its id
  const playerElt = document.getElementById(player);
  // Append the dice element to the player's board
  playerElt.appendChild(diceElt);

  // Set the background position based on X axis to display the correct dice face using a sprite
  diceElt.style.backgroundPositionX = `${(-100 * diceValue) + 100}px`;
}

// Ask the user how many dice they want to roll and convert the input to a number
const playerInput = Number(prompt("Combien de dÃ©s souhaitez-vous lancer ?"));

// Loop to generate the specified number of dice for both the player and the dealer
for (let dice = 1; dice <= playerInput; dice++) {
  generateDice("player");
  generateDice("dealer");
}
```

??? success "**RÃ©sultat attendu.**"

    ![Image du prompt](../../assets/sa05e01/images/prompt.png)
    ![Affichage du rendu de la page avec les Ã©vÃ¨nements dans la console](../../assets/sa05e01/images/result.png)
