---
date:
  created: 2025-10-15
  updated: 2025-10-16
---

# **üìÖ SAISON A Semaine 5 √âpisode 3 - Une Journ√©e en Pair-Programming**

## **üìö Notions du jour**

Aujourd‚Äôhui, j‚Äôai particip√© √† un **atelier en pair-programming** avec pour objectif de cr√©er une **application web d‚Äôardoise pixel art**, inspir√©e du style r√©tro de *Space Invaders*. Le d√©fi ? **Tout g√©n√©rer en JavaScript** : la grille de pixels, le formulaire de configuration, et m√™me la palette de couleurs. Nous avions seulement une maquette comme point de d√©part. Pas de code fourni, juste une id√©e √† concr√©tiser !

<!-- more -->

---

!!! note "üñäÔ∏è Mise √† jour le 16 octobre 2025"

    Cet article a √©t√© mis √† jour pour inclure une am√©lioration du code permettant de corriger les probl√®mes rencontr√©s √©nonc√©s dans la section üé® Am√©liorations et D√©fis.  
    Ajout de la section suivante : üí™ Suite et fin !

### **üìê √âtape Pr√©paratoire : D√©couper la Maquette**

Le matin, nous avons commenc√© par **analyser la maquette** pour identifier les √©l√©ments cl√©s :

1. **Un `<header>`** contenant un formulaire avec :
   + Un *input* pour d√©finir la **taille de la grille** (en nombre de pixels).
   + Un *input* pour d√©finir la **taille des pixels** (en pixels).
   + Un bouton pour valider et g√©n√©rer la grille.
2. **Un `<main>`** contenant :
   + La **grille de pixels** (notre ardoise).
   + Une **palette de couleurs** en bas, pour choisir la couleur des pixels.

**Action :** Nous avons cr√©√© une structure HTML basique et ajout√© un peu de CSS pour styliser les √©l√©ments (couleurs, tailles, etc.). L‚Äôid√©e √©tait de pr√©parer le terrain pour que JavaScript puisse prendre le relais. Nous sommes partis d'une grille de d√©part compos√©e de 8 x 8 pixels (chaque pixel faisant une taille de `50px`) *cod√©e en dur* dans le HTML pour pr√©visualiser le rendu attendu.

```html title="invader.html - Body content"
<!DOCTYPE html>
<html lang="en">
<body>
  <header>
    <form action="">
      <input type="number" min="" max="" step="1" placeholder="Taille de la grille">
      <input type="number" min="" max="" step="1" placeholder="Taille des pixels">
      <button type="submit">Valider</button>
    </form>
  </header>

  <main>
    <div id="grid">
      <!-- Simulate a 8x8 grid -->
      <div class="pixel"></div>
      <!-- <div class="pixel"></div> 
           <div class="pixel"></div>
           <div class="pixel"></div>
           ...
           <div class="pixel"></div>-->
      <div class="pixel"></div>
    </div>
    <div class="palette"></div>
  </main>
  <script src="../js/app.js"></script>
</body>
</html>
```

```css title="style.css - base CSS"
:root {
    --pixel-color-grey-light: #D2DAE2;
    --pixel-border-grey-light: #808E9B;
    --pixel-color-grey-dark: #485460;
    --pixel-border-grey-dark: #1D262D;
    --bg-color-main: #665ACE;
    --bg-color-header: #3148AD;
}

header {
    background-color: var(--bg-color-header);
    height: 20dvh;
    display: flex;
    justify-content: center;
    align-items: center;
}

main {
    background-color: var(--bg-color-main);
    height: 80dvh;
    display: flex;
    justify-content: center;
    align-items: center;
}

#grid {
    display: grid;
    grid-template-rows: auto;
    width: auto;
    height: auto;
}

.pixel {
    background-color: var(--pixel-color-grey-light);
    border: 2px solid var(--pixel-border-grey-light);
    height: 50px;
    width: 50px;
}
```

---

### **üíª Cr√©ation de l‚ÄôApplication avec JavaScript**

#### **1Ô∏è‚É£ G√©n√©rer la Grille de Pixels**

**Objectif :** G√©n√©rer une grille dynamique en fonction de la taille choisie par l‚Äôutilisateur.

**Premi√®re approche :** Avant de nous attaquer √† la gestion du formulaire, nous avons commenc√© avec un `#!javascript prompt()` pour demander la taille de la grille, en fixant la taille des pixels √† `50px` pour les tests.

```javascript title="app.js - Grid generation" linenums="1"
// Get #grid Element
const grid = document.getElementById("grid");
// Initial test with a prompt
const userInput = Number(prompt("Taille de la grille ?"));

// Use the grid-template-columns CSS property to create the grid
grid.style.gridTemplateColumns = `repeat(${userInput}, 1fr)`;
// Generate the grid
for (let round = 0; round < userInput * userInput; round++) {
  const pixel = document.createElement("div"); // Create a pixel element
  pixel.classList.add("pixel"); // Add .pixel class to the pixel element
  grid.appendChild(pixel); // Append pixel element into #grid element
}
```

??? success "**R√©sultat :** Une grille de pixels gris clair, pr√™te √† √™tre color√©e !"

    ![R√©sultat d'affichage de la grille dans le navigateur](../../../assets/sa05E03/images/invaders_step1.png)

---

#### **2Ô∏è‚É£ Rendre les Pixels Cliquables**

**Objectif :** Changer la couleur d‚Äôun pixel au clic (noir par d√©faut).

**Solution :** Nous avons pens√© √† cr√©er une classe `dark` afin de l'ajouter √† un pixel lorsque celui-ci est *cliqu√©*. Si un pixel poss√®de la classe `dark`, alors il prend la couleur *noir*. En cherchant dans la documentation, nous avons trouver que nous pouvions utiliser un `addEventListener` avec la m√©thode `toggle()` de l'objet `classList`d'un *HTML DOM element* pour basculer entre les classes CSS.

```javascript title="app.js - Toggling pixel color" linenums="6"
// ...

// Generate the grid with toggle event on pixels
for (let round = 0; round < userInput * userInput; round++) {
  const pixel = document.createElement("div"); // Create a pixel element
  pixel.classList.add("pixel"); // Add .pixel class to the pixel element
  // Add "click" event Listener with classList.toggle() method on pixels
  pixel.addEventListener("click", () => {
    pixel.classList.toggle("dark");
  });
  grid.appendChild(pixel); // Append pixel element into #grid element
}
```

**CSS associ√© :**

```css title="style.css - Add .dark class"
.dark {
    background-color: var(--pixel-color-grey-dark); /* Corresponding to #485460 */
    border: 2px solid var(--pixel-border-grey-dark); /* Corresponding to #1D262D */
}
```

??? success "**R√©sultat :** Une grille interactive o√π chaque clic inverse la couleur du pixel !"

    ![Gif repr√©sentant un rendu visuel de la fonctionnalit√© ajout√©e de pouvoir changer la couleur des pixels en gris ou noir](../../../assets/sa05E03/images/invaders-step2.gif)

---

#### **3Ô∏è‚É£ Int√©grer le Formulaire**

**Objectif :** Remplacer le `#!javascript prompt()` par un formulaire HTML pour configurer la grille.

**√âtapes :**

1. R√©cup√©rer les valeurs des *inputs* (taille de la grille et taille des pixels).
2. G√©n√©rer la grille en fonction de ces valeurs.

```javascript title="app.js - Generate new grid with the form" linenums="1"
// Get #grid Element
const grid = document.getElementById("grid");

// Get the form elements
const form = document.querySelector("form");  // Get the form
const gridSizeInput = document.querySelector(".grid-size"); // Get input for grid size
const pixelSizeInput = document.querySelector(".pixel-size"); // Get input for pixel size

// Add event listener to the form to get inputs values to generate a new grid once submited
form.addEventListener("submit", (event) => {
  // Prevent default form behaviour
  event.preventDefault();
  // Reset the grid
  const pixelsToRemove = document.querySelectorAll('.pixel'); // Get all pixels from the grid
  // Remove pixels
  for (const pixel of pixelsToRemove) {
    pixel.remove();
  }
  
  // Update the grid generation with form inputs values
  const gridSizeInputValue = gridSizeInput.value; // Get grid size input value
  const pixelSizeInputValue = pixelSizeInput.value; // Get pixel size input value
  
  grid.style.gridTemplateColumns = `repeat(${gridSizeInputValue}, 1fr)`;
  
  for (let round = 0; round < Math.pow(gridSizeInputValue, 2); round++) {
    const pixel = document.createElement("div"); // Create a pixel element
    pixel.classList.add("pixel"); // Add .pixel class to the pixel element
    // Add "click" event Listener with classList.toggle() method on pixels
    pixel.addEventListener("click", () => {
      pixel.classList.toggle("dark");
    });
    grid.appendChild(pixel); // Append pixel element into #grid element
  }
  form.reset(); // Reset form inputs
});
```

??? success "**R√©sultat :** Un formulaire fonctionnel qui g√©n√®re une grille personnalis√©e !"

    ![Gif repr√©sentant un rendu visuel de l'utilisation du formulaire pour g√©n√©rer une nouvelle grille](../../../assets/sa05E03/images/invaders-step3.gif)

---

#### **4Ô∏è‚É£ Partie Bonus : Cr√©er la Palette de Couleurs**

**Objectif :** Ajouter une palette de couleurs pour modifier la couleur des pixels.

**√âtapes :**

1. Cr√©er la palette (une `<div>` par couleur).
2. Permettre √† l‚Äôutilisateur de s√©lectionner une couleur.
3. Appliquer la couleur s√©lectionn√©e aux pixels cliqu√©s.

**Ajout de la palette dans le fichier html :**

```html title="invader.html - Palette"
<!-- Add a <div> containing the different colors into the <main> section -->
<div class="palette">
  <!-- Add a <div> by color -->
  <div class="grey"></div> 
  <div class="dark"></div>
  <div class="orange"></div>
  <div class="green"></div>
</div>
```

**CSS pour la palette :**

```css title="style.css"
.grey {
    background-color: var(--pixel-color-grey-light);
    border: 2px solid var(--pixel-border-grey-light);
}

.dark {
    background-color: var(--pixel-color-grey-dark);
    border: 2px solid var(--pixel-border-grey-dark);
}

.green {
    background-color: var(--pixel-color-green);
    border: 2px solid var(--pixel-border-green);
}

.orange {
    background-color: var(--pixel-color-orange);
    border: 2px solid var(--pixel-border-orange);
}

.palette {
    background-color: #4A45A3;
    padding: 2rem;
    display: flex;
    gap: 1rem;
    align-items: center;
    justify-content: space-between;
    position: absolute;
    right: 0;
    bottom: 0;
}

.palette > * {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border-width: 4px;

}

/* If a color is clicked, this class will be added to change the color size
and to specify that the color is selected */
.color-selected {
    width: 80px;
    height: 80px; 
}
```

??? success "Rendu avec la palette"

    ![Rendu visuel avec la palette ajout√©e](../../../assets/sa05E03/images/palette.png)

---

**Il faut maintenant pouvoir s√©lectionner les couleurs sur la Palette et les lier aux Pixels.**

**Solution partielle trouv√©e :** En cherchant dans la documentation, nous avons utilis√© `classList.item()` pour r√©cup√©rer la classe de la couleur s√©lectionn√©e et l‚Äôappliquer aux pixels.

```javascript title="app.js - Palette handling"
// ...

/**
 * Update "click" event in the grid generation part
 * By Handling "click" event to change pixel color
 */
pixel.addEventListener("click", () => {
  // Get the selected color from palette
  const selectedColor = document.querySelector(".color-selected").classList.item(0);
  // Get current color of the pixel
  const currentPixelColor = pixel.classList.item(1);
  // Replace current color with selected color
  pixel.classList.replace(currentPixelColor, selectedColor);
});

// ...

// Get all color elements from the palette
const paletteColors = document.querySelectorAll(".palette > *");

// Handles click event to select a color from the palette
for (const color of paletteColors) {
  color.addEventListener("click", () => {
    // Toggle 'color-selected' on the clicked color
    color.classList.toggle("color-selected");
  });
}
```

??? success "**R√©sultat final obtenu :** Les pixels prennent la couleur s√©lectionn√©e dans la palette !"

    ![d√©mo du rendu final du challenge du jour](../../../assets/sa05E03/images/invaders-step4-bonus.gif)

---

### **üé® Am√©liorations et D√©fis**

**Probl√®me rencontr√© :** La solution propos√©e reste √† optimiser. En effet, lorsque l'on clique sur une couleur pour la s√©lectionner il faudrait que celle-ci devienne s√©lectionn√©e et que toutes les autres couleurs ne soient plus s√©lectionn√©es. Le comportement actuel est que lorsqu'on clique sur une couleur, les autres couleurs restent s√©lectionn√©es si elles ont d√©j√† √©t√© s√©lectionn√©es avant. Ce qui fait que l'on peut s√©lectionner toutes les couleurs en m√™me temps.  
Il faut cliquer √† nouveau sur une couleur d√©j√† s√©lectionn√©e pour la d√©-s√©lectionner gr√¢ce √† `toggle()`. En l'√©tat pour pouvoir changer la couleur des pixels il faut s√©lectionner une seule couleur et d√©-s√©lectionner manuellement les autres couleurs afin de n'avoir qu'une seule couleur s√©lectionn√©e dans la **palette**. Ensuite on peut cliquer sur les pixels afin de changer leur couleur.

---

### **üí° Ce Que J‚Äôai Appris Aujourd‚Äôhui**

+ **Le pair programming est puissant** : Travailler √† deux permet de **r√©soudre des probl√®mes plus rapidement** et d‚Äôapprendre des approches diff√©rentes.
+ **La documentation est une alli√©e** : Sans elle, nous n‚Äôaurions pas trouv√© `classList.toggle()` ou `classList.item()`.
+ **Les petites victoires comptent** : Chaque √©tape franchie (m√™me minuscule) est une avanc√©e !
+ **L‚Äôimportance des tests** : Tester chaque fonctionnalit√© au fur et √† mesure √©vite les bugs cumulatifs.

### **üí™ Suite et fin !**

!!! note "Ce paragraphe a √©t√© ajout√© lors de la mise √† jour du 16 octobre 2025."

Apr√®s une bonne nuit de sommeil üõåüí§ √† r√™ver de grilles, de pixels et de lignes de code. Je me r√©veille üò¥ en pensant avoir trouv√© comment ne s√©lectionner **qu'une seule couleur** sur la **palette** sans les s√©lectionner toutes en m√™me temps.
Pour cela je me suis dit que lorsque je s√©lectionne une couleur sur la palette, il faut que d√©-s√©lectionne toutes les couleurs de la palette qui sont s√©lectionn√©es d'abord (c'est-√†-dire qu'elles poss√®dent la classe `color-selected`).

**Voici ma solution :**

```javascript title="app.js - Select only one color from the palette"
/**
 * Handles click event to select a color from the palette
 */
for (const color of paletteColors) {
  color.addEventListener("click", () => {
    // If the color is not already selected
    if (!color.classList.contains("color-selected")) {
      // Remove 'color-selected' from all colors
      for (const color of paletteColors) {
        if (color.classList.contains("color-selected")) {
          color.classList.toggle("color-selected");
        }
      }
    }
    // Toggle 'color-selected' on the clicked color
    color.classList.toggle("color-selected");
  });
}
```

??? success "**R√©sultat final obtenu :** Les pixels prennent la couleur s√©lectionn√©e dans la palette !"

    ![d√©mo du rendu final du challenge avec am√©lioration](../../../assets/sa05E03/images/invaders_final_result.gif)
