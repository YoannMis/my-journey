---
date:
  created: 2025-11-03

---

# **ğŸ“… SAISON B Semaine 1 Ã‰pisode 1 - DÃ©couverte de Node.js**

## **ğŸ“š Notions du jour**

+ **NodeJS**, câ€™est quoi ?
+ Les modules natifs, ces objets bien pratiques quâ€™on rÃ©cupÃ¨re grÃ¢ce Ã  import
+ le module **[Readline](https://nodejs.org/api/readline.html)**

<!-- more -->

---

### **ğŸŒ Node.js, Câ€™est Quoi ?**

Aujourdâ€™hui, je plonge dans un **nouveau monde** : le **backend** avec **Node.js** ! Jusquâ€™Ã  prÃ©sent, jâ€™utilisais JavaScript pour crÃ©er des interfaces dynamiques dans le navigateur (grÃ¢ce Ã  Svelte). Mais Node.js, câ€™est **JavaScript cÃ´tÃ© serveur** ! ğŸš€

**En rÃ©sumÃ© :**

+ **Node.js** est un **environnement dâ€™exÃ©cution** pour JavaScript, qui permet de lancer du code **hors du navigateur** (sur un serveur, par exemple).
+ Il est **asynchrone et Ã©vÃ©nementiel**, ce qui le rend idÃ©al pour les applications qui nÃ©cessitent des **requÃªtes rÃ©seau, des fichiers, ou des bases de donnÃ©es**.

**Pourquoi utiliser Node.js ?**

+ **Un seul langage** (JavaScript) pour le frontend **et** le backend.
+ **Une communautÃ© Ã©norme** et des milliers de modules disponibles via **npm** (Node Package Manager).
+ **Performant** grÃ¢ce Ã  son modÃ¨le non-bloquant (parfait pour les applications en temps rÃ©el).

---

### **ğŸ“¦ Les Modules Natifs : Des Outils PrÃªts Ã  lâ€™Emploi**

Node.js vient avec des **modules natifs** (ou *built-in modules*), qui permettent dâ€™effectuer des tÃ¢ches courantes sans installer de dÃ©pendances externes. On les importe avec la syntaxe `import <module> from "node:<module>"`.

Voici une **sÃ©lection des modules les plus utiles**, avec des exemples concrets pour chacun.

| Module          | UtilitÃ©                                                                |
|-----------------|------------------------------------------------------------------------|
| `fs`            | Interagir avec le systÃ¨me de fichiers (lire/Ã©crire des fichiers).      |
| `path`          | Manipuler les chemins de fichiers (indÃ©pendamment du systÃ¨me dâ€™exploitation). |
| `os`            | Interagir avec le SystÃ¨me dâ€™Exploitation.                              |
| `http`          | CrÃ©er un serveur web ou faire des requÃªtes HTTP.                       |
| `events`        | GÃ©rer des Ã©vÃ©nements personnalisÃ©s.                                    |
| `readline`      | Lire des entrÃ©es utilisateur depuis la console (ligne par ligne).      |

---

#### **ğŸ“ Le Module `fs` : Manipuler le SystÃ¨me de Fichiers**

##### **Exemples dâ€™Utilisation :**

1. **Lire un fichier :**

  ```javascript
  // Import the 'fs' module to work with files
  import fs from 'node:fs';

  // Read a file asynchronously
  fs.readFile('example.txt', 'utf8', (err, data) => {
    if (err) {
      console.error("Error reading file:", err);
      return;
    }
    console.log("File content:", data);
  });
  ```

2. **Ã‰crire dans un fichier :**

  ```javascript
  import fs from 'node:fs';

  try {
    fs.writeFileSync('file.txt', 'Hello, Node.js !');
    console.log("File written successfully!");
  } catch (err) {
    console.error("File write error :", err);
  }
  ```

3. **Lister les fichiers dâ€™un dossier :**

  ```javascript
  import fs from 'node:fs';

  fs.readdir('.', (err, files) => {
    if (err) {
      console.error("Error :", err);
      return;
    }
    console.log("Files in the directory :", files);
  });
  ```

**Cas dâ€™usage :**

+ Sauvegarder des donnÃ©es utilisateur.
+ Lire des fichiers de configuration.
+ Traiter des logs ou des exports.

---

#### **ğŸ—ºï¸ Le Module `path` : GÃ©rer les Chemins de Fichiers**

Le module `path` permet de **manipuler les chemins de fichiers** de maniÃ¨re **cross-platform** (compatible Windows, Linux, macOS). Plus besoin de se soucier des `/` ou `\` !

##### **Exemples dâ€™Utilisation :**

```javascript
// Import the 'path' module to handle file paths
import path from 'node:path';

// Join path segments to create a cross-platform path
const filePath = path.join('folder', 'subfolder', 'file.txt');
console.log("Constructed path:", filePath);
// Output (on Unix): "folder/subfolder/file.txt"
// Output (on Windows): "folder\subfolder\file.txt"
```

1. **Construire un chemin absolu :**

  ```javascript
  // Import the 'path' module to handle file paths
  import path from 'node:path';

  // Join path segments to create a cross-platform path
  const fullPath = path.join(__dirname, 'directory', 'file.txt');
  console.log("Full path:", fullPath);
  // Output (on Unix) : "/absolute/path/directory/file.txt"
  // Output (on Windows) : "C:\absolute\path\directory\file.txt"
  ```

2. **Extraire le nom de fichier dâ€™un chemin :**

  ```javascript
  const fileName = path.basename('/path/to/file.txt');
  console.log("File name:", fileName); // "file.txt"
  ```

3. **RÃ©cupÃ©rer lâ€™extension dâ€™un fichier :**

  ```javascript
  const ext = path.extname('file.txt');
  console.log("Extension:", ext); // ".txt"
  ```

**Cas dâ€™usage :**

+ Construire des chemins dynamiques dans une application.
+ Valider ou parser des chemins utilisateur.
+ Ã‰vite les problÃ¨mes de compatibilitÃ© entre Windows, Linux et macOS.

---

#### **ğŸŒ Le Module `os` : Interagir avec le SystÃ¨me dâ€™Exploitation**

Le module `os` fournit des **informations sur le systÃ¨me dâ€™exploitation** et lâ€™environnement dâ€™exÃ©cution. IdÃ©al pour adapter le comportement de votre application en fonction de la plateforme.

##### **Exemples dâ€™Utilisation :**

1. **RÃ©cupÃ©rer le systÃ¨me dâ€™exploitation :**

   ```javascript
   import os from 'node:os';

   console.log("OS:", os.platform());
   // "linux", "win32", "darwin" (macOS), etc.
   ```

2. **ConnaÃ®tre lâ€™architecture du processeur :**

   ```javascript
   console.log("Architecture :", os.arch());
   // "x64", "arm64", etc.
   ```

3. **Obtenir des informations sur la mÃ©moire :**

   ```javascript
   console.log("Memory:", os.totalmem() / 1024 / 1024, "Mb");
   console.log("Free memory :", os.freemem() / 1024 / 1024, "Mb");
   ```

4. **RÃ©cupÃ©rer les interfaces rÃ©seau :**

   ```javascript
   console.log("Networks:", os.networkInterfaces());
   // Print IP addresses, MAC addresses, etc.
   ```

5. **ConnaÃ®tre le rÃ©pertoire personnel de lâ€™utilisateur :**

   ```javascript
   console.log("User folder:", os.homedir());
   // "/home/user" (Linux/macOS) or "C:\Users\user" (Windows)
   ```

**Cas dâ€™usage :**

+ Adapter le comportement de lâ€™application en fonction de lâ€™OS (ex: chemins de fichiers, commandes systÃ¨me).
+ Optimiser les performances en fonction des ressources disponibles (CPU, mÃ©moire).
+ Personnaliser lâ€™expÃ©rience utilisateur (ex: langue, rÃ©pertoire de sauvegarde).

---

#### **ğŸ”  Le Module `readline` : Lire des EntrÃ©es Utilisateur en Console**

Le module `readline` permet de **lire des entrÃ©es utilisateur depuis le terminal**, ligne par ligne. Câ€™est parfait pour crÃ©er des **interfaces en ligne de commande (CLI)** ou des scripts interactifs.

---

#### **ğŸ“– Exemple : Un Script Interactif avec `readline`**

```javascript
// Import the 'readline' module to read user input
import * as readline from 'node:readline';

// Create an interface to read from stdin and write to stdout
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

// Ask the user a question
rl.question("What's your name? ", (name) => {
  console.log(`Hello, ${name}!`);

  // Close the interface
  rl.close();
});
```

**Explications :**

1. **`readline.createInterface`** : CrÃ©e une interface pour lire depuis `stdin` (lâ€™entrÃ©e standard) et Ã©crire vers `stdout` (la sortie standard).
2. **`rl.question`** : Pose une question Ã  lâ€™utilisateur et attend sa rÃ©ponse.

**Cas dâ€™usage :**

+ CrÃ©er un **menu interactif** en ligne de commande.
+ Automatiser des tÃ¢ches avec des **questions/rÃ©ponses** (ex: configuration dâ€™un projet).

---

### **ğŸ’¡ Pourquoi Utiliser les Modules Natifs ?**

1. **Pas de dÃ©pendances externes** : Moins de risques de vulnÃ©rabilitÃ©s ou de conflits de versions.
2. **Performances optimisÃ©es** : Ces modules sont **compilÃ©s avec Node.js**, donc trÃ¨s rapides.
3. **PortabilitÃ©** : Fonctionnent sur tous les systÃ¨mes (Windows, Linux, macOS).
4. **Documentation officielle** : Bien documentÃ©s et maintenus par lâ€™Ã©quipe Node.js.

---

### **ğŸ’¡ Ce Que Jâ€™ai Appris Aujourdâ€™hui**

1. **Node.js Ã©tend JavaScript au backend** : Plus besoin dâ€™un navigateur pour exÃ©cuter du JS !
2. **Les modules natifs** sont des outils puissants pour des tÃ¢ches courantes (fichiers, chemins, entrÃ©es/sorties).
3. **`readline`** permet de crÃ©er des **scripts interactifs** en ligne de commande, idÃ©al pour des outils CLI ou des prototypes rapides.

---

## **âŒ¨ï¸ Challenge du jour : "Hit MO'chine" â€“ Un Outil en Ligne de Commande avec Node.js !**

---

### **ğŸ¤ PrÃ©sentation du Challenge**

Vous vous souvenez de cette Ã©mission des annÃ©es 90 qui prÃ©sentait le classement du Hit Parade ?  
Aujourdâ€™hui, on va crÃ©er un **outil en ligne de commande (CLI)** pour Charlu et Lili, deux prÃ©sentateurs fictifs qui veulent afficher les **10 premiÃ¨res entrÃ©es du hit-parade**. Lâ€™objectif est de rÃ©aliser un script Node.js qui interagit avec lâ€™utilisateur via la console, en utilisant le **systÃ¨me Ã©vÃ©nementiel** de Node.js et le module `readline`.

**FonctionnalitÃ©s demandÃ©es :**

1. **Afficher un message dâ€™accueil** : `"Que souhaitez-vous faire ?"`.
2. **RÃ©pondre Ã  3 commandes** :

  + `chante` : Affiche un message personnalisÃ©.
  + `classement` : Affiche les 10 premiÃ¨res entrÃ©es du Top 50 (Ã  partir dâ€™un tableau fourni).
  + `quitter` : Ferme le programme.

3. **Bonus** : Ajouter une commande `position n` pour afficher lâ€™entrÃ©e Ã  la position `n` du classement (ex: `position 5` affiche le *Hit* en position 5 du classement).

---

### **ğŸ¯ Objectif du Challenge**

CrÃ©er un **script interactif en Node.js** qui :

+ Utilise le module `readline` pour **lire les entrÃ©es utilisateur**.
+ GÃ¨re des **Ã©vÃ©nements** pour rÃ©pondre aux commandes.
+ Affiche des **donnÃ©es dynamiques** (le classement du Top 50).

**Les donnÃ©es nous sont fournies sous forme de tableau JavaScript nommÃ© `hitParade`**

---

### **ğŸ“Œ Ã‰tapes RÃ©alisÃ©es**

#### **1ï¸âƒ£ Initialisation du Projet et Import des Modules**

**Objectif :** Dans le fichier `index.mjs` dÃ©jÃ  fournit, importer les modules nÃ©cessaires (`readline`).

**Mon code :**

```javascript title="index.mjs"
// Import the 'readline' module and 'stdin', 'stdout' processes to handle user input
import { stdin, stdout } from "node:process";
import * as readline from "node:readline";

// Create the readline interface
const rl = readline.createInterface({
  input: stdin,
  output: stdout
});
```

---

#### **2ï¸âƒ£ Afficher le Message dâ€™Accueil et GÃ©rer les Commandes**

**Objectif :** Demander Ã  lâ€™utilisateur `"Que souhaitez-vous faire ?"` et Ã©couter ses rÃ©ponses pour dÃ©clencher les actions correspondantes.

**Mon code :**

```javascript title="index.mjs"
/**
 * The main question prompt displayed to the user.
 * @type {string}
 */
const question = `Que souhaitez-vous faire ?
- Tapez 'chante' pour que Charlu & Lili chantent le gÃ©nÃ©rique de Hit MO'chine,
- Tapez 'classement' pour afficher le classement des 10 premiers Hits du Top 50,
- Tapez 'position <n>' oÃ¹ <n> reprÃ©sente la position de la chanson que vous souhaitez afficher (un nombre compris entre 1 et 10).
- Tapez 'quitter' pour quitter.
`;

/**
 * The jingle played when the user selects 'chante'.
 * @type {string}
 */
const jingle = "Je m'appelle Charlu, je m'appelle Lili, vous Ãªtes chez O'clock !";

/**
 * Initializes the readline interface and handles user input events.
 */
const rl = readline.createInterface({ input: stdin, output: stdout });

// Display the main question prompt to the user
console.log(question);

/**
 * Event listener for each line of user input.
 * Handles different commands: 'chante', 'classement' and 'quitter'.
 */
rl.on('line', (userAnswer) => {
  switch(userAnswer.toLowerCase()) {
    // If the user input is equal to 'chante'
    case "chante":
      // Display the jingle into the console
      console.log(`\n${jingle}\n`);
      break;
    // If the user input is equal to 'classement'
    case "classement":
      // Display the Hit Parade ranking into the console
      console.log(`\nVoici le classement des 10 premiers Hits du Top 50 :`);
      hitParade.forEach((element, index) => {
        console.log(`${index + 1}. ${element}`);
      });
      console.log("");
      break;
    // If the user input is equal to 'quitter'
    case "quitter":
      // Display a goodbye message
      console.log("\nAu revoir !");
      rl.close(); // Close properly the readline handler
      return; // Stop the function
    // Else, display an error message
    default:
      console.error("\nJe n'ai pas compris votre demande.")
  }
  // Re-display the question prompt after each command
  console.log(question);
});
```

---

#### **3ï¸âƒ£ Bonus : afficher lâ€™entrÃ©e Ã  la position `n` du classement**

**Bonus : Commande `position n`** :

+ Utilisation des ***expressions rÃ©guliÃ¨res*** pour dÃ©tecter la commande. Lors de la correction, l'enseignant a utilisÃ© la mÃ©thode `startsWith()`mais j'ai voulu essayer les *expressions rÃ©guliÃ¨res* pour m'entraÃ®ner.
+ Extraction du numÃ©ro avec `split()`.
+ Recherche de lâ€™entrÃ©e correspondante dans le tableau `hitParade`.

**Mon code final avec la gestion de la position 'n' :**

```javascript title="index.mjs" linenums="1"
// Import required modules from Node.js
import { stdin, stdout } from "node:process";
import * as readline from "node:readline";

/**
 * Array containing the top 10 songs in the hit parade, ordered from first to last.
 * @type {string[]}
 */
const hitParade = [
  `Jain - Come`,
  `Matt Simons - Catch & Realease`,
  `Twety One Pilots - Stressed Out`,
  `Justin Bieber - Love Yourself`,
  `Kids United - On Ã©crit sur les murs`,
  `Rihanna - Work`,
  `Julian Perretta - Miracle`,
  `Yall - Hundred Miles`,
  `Kendji Girac - No Me MirÃ¨s MÃ s`,
  `Feder - Blind (feat. Emmi)`
];


/**
 * The main question prompt displayed to the user.
 * @type {string}
 */
const question = `Que souhaitez-vous faire ?
- Tapez 'chante' pour que Charlu & Lili chantent le gÃ©nÃ©rique de Hit MO'chine,
- Tapez 'classement' pour afficher le classement des 10 premiers Hits du Top 50,
- Tapez 'position <n>' oÃ¹ <n> reprÃ©sente la position de la chanson que vous souhaitez afficher (un nombre compris entre 1 et 10).
- Tapez 'quitter' pour quitter.
`;

/**
 * The jingle played when the user selects 'chante'.
 * @type {string}
 */
const jingle = "Je m'appelle Charlu, je m'appelle Lili, vous Ãªtes chez O'clock !";

/**
 * Extracts the rank number from the user's input string.
 * @param {string} userInput - The input string from the user (e.g., "position 3").
 * @returns {number} The rank number requested by the user.
 */
function getRankFromUserInput(userInput) {
  const positionSplit = userInput.split(" ");
  return Number(positionSplit[1]);
}

/**
 * Retrieves the song from the hit parade based on the user's requested rank.
 * @param {string} position - The input string containing the rank (e.g., "position 3").
 * @returns {string} The song at the requested rank.
 */
function getHitFromRank(position) {
  const rank = getRankFromUserInput(position);
  const rankIndex = rank - 1;
  return hitParade[rankIndex];
}

/**
 * Initializes the readline interface and handles user input events.
 */
const rl = readline.createInterface({ input: stdin, output: stdout });

// Display the main question prompt to the user
console.log(question);

/**
 * Event listener for each line of user input.
 * Handles different commands: 'chante', 'classement', 'position <n>', and 'quitter'.
 */
rl.on('line', (userAnswer) => {
  // Check if the user requested a specific position
  if (userAnswer.match(/^position [1-9]$|^position 10$/)) {
    const hitRank = getHitFromRank(userAnswer);
    console.log(`Hit classÃ© nÂ°${getRankFromUserInput(userAnswer)} : ${hitRank}`);
  } else {
    switch(userAnswer.toLowerCase()) {
      // If the user input is equal to 'chante'
      case "chante":
        // Display the jingle into the console
        console.log(`\n${jingle}\n`);
        break;
      // If the user input is equal to 'classement'
      case "classement":
        // Display the Hit Parade ranking into the console
        console.log(`\nVoici le classement des 10 premiers Hits du Top 50 :`);
        hitParade.forEach((element, index) => {
          console.log(`${index + 1}. ${element}`);
        });
        console.log("");
        break;
      // If the user input is equal to 'quitter'
      case "quitter":
        // Display a goodbye message
        console.log("\nAu revoir !");
        rl.close(); // Close properly the readline handler
        return; // Stop the function
      // Else, display an error message
      default:
        console.error("\nJe n'ai pas compris votre demande.")
    }
  }
  // Re-display the question prompt after each command
  console.log(question);
});

```

---

### **ğŸ–¥ï¸ Rendu Final du Programme**

![Rendu final du challenge du jour.](../../../../assets/sb01e01/final-rendering.gif)

---

### **ğŸ’¡ Ce Que Jâ€™ai Appris avec ce Challenge**

1. **Utiliser `readline`** pour crÃ©er des **interfaces en ligne de commande interactives**.
2. **GÃ©rer les entrÃ©es utilisateur** de maniÃ¨re asynchrone avec des callbacks.
3. **DÃ©couper et analyser des commandes** (ex: `position 5`) pour extraire des informations.
4. **Fermer proprement un programme** avec `rl.close()`.

---
