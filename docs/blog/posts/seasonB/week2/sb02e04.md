---
date:
  created: 2025-11-17

---

# **ğŸ“… SAISON B Semaine 2 Ã‰pisode 4 - GET et POST**

## **ğŸ“š Notions du jour**

Aujourdâ€™hui, jâ€™ai plongÃ© dans les deux mÃ©thodes HTTP les plus fondamentales : **GET** et **POST**. Ces mÃ©thodes sont essentielles pour envoyer des donnÃ©es dâ€™un client (comme un navigateur web) Ã  un serveur. Elles servent des objectifs trÃ¨s diffÃ©rents et ont des comportements distincts.

<!-- more -->

---

### **ğŸ” MÃ©thode GET : Les DonnÃ©es dans lâ€™URL**

La mÃ©thode **GET** est utilisÃ©e pour **demander des donnÃ©es Ã  un serveur**. Lorsquâ€™on utilise GET, les donnÃ©es sont envoyÃ©es dans **lâ€™URL** sous forme de **paramÃ¨tres de requÃªte**. Cela rend les requÃªtes GET **visibles et partageables**, mais aussi **moins sÃ©curisÃ©es** pour les donnÃ©es sensibles (puisque lâ€™URL peut Ãªtre enregistrÃ©e ou partagÃ©e).

#### **Syntaxe des RequÃªtes GET**

+ Lâ€™URL commence par un `?` pour indiquer le dÃ©but des paramÃ¨tres de requÃªte (*query parameters*).
+ Chaque paramÃ¨tre est une **paire clÃ©-valeur** : `clÃ©=valeur`.
+ Plusieurs paramÃ¨tres sont sÃ©parÃ©s par `&`.

**Exemple :**

```plaintext
https://example.com/search?q=express&sort=asc
```

+ `q=express` : La requÃªte de recherche est "express".
+ `sort=asc` : Les rÃ©sultats doivent Ãªtre triÃ©s par ordre ascendant.

#### **Comment GÃ©rer les RequÃªtes GET dans Express**

Dans Express, on peut accÃ©der aux paramÃ¨tres GET en utilisant `req.query`.

**Exemple :**

```javascript
// Express route to handle a GET request
app.get('/search', (req, res) => {
  const query = req.query.q; // Access to 'q' parameter
  const sortOrder = req.query.sort; // Access to 'sort' parameter

  res.send(`Searching for: ${query}, sorted by: ${sortOrder}`);
});
```

**Explications :**

+ `req.query` est un objet contenant tous les paramÃ¨tres de requÃªte.
+ Si lâ€™URL est `/search?q=express&sort=asc`, `req.query` sera `{ q: 'express', sort: 'asc' }`.

**Cas dâ€™Utilisation pour GET :**

+ Recherche (ex. : recherche Google).
+ Filtrage de donnÃ©es (ex. : filtres de produits sur un site e-commerce).
+ Partage ou marquage dâ€™URLs (puisque les paramÃ¨tres sont visibles dans lâ€™URL).

---

### **ğŸ“© MÃ©thode POST : Les DonnÃ©es dans le Corps de la RequÃªte**

La mÃ©thode **POST** est utilisÃ©e pour **envoyer des donnÃ©es au serveur afin de crÃ©er ou mettre Ã  jour une ressource**. Contrairement Ã  GET, les donnÃ©es dans une requÃªte POST sont envoyÃ©es dans le **corps de la requÃªte HTTP**, ce qui les rend **invisibles dans lâ€™URL**. Cela rend les requÃªtes POST plus adaptÃ©es pour envoyer des donnÃ©es sensibles (comme des mots de passe) ou de grandes quantitÃ©s de donnÃ©es.

#### **Fonctionnement de POST**

+ Les donnÃ©es sont envoyÃ©es dans le **corps** de la requÃªte HTTP.
+ Le serveur doit **analyser le corps** pour accÃ©der aux donnÃ©es.
+ Dans Express, nous avons besoin dâ€™un middleware comme `express.urlencoded()` ou `express.json()` pour analyser le corps. Il ne dÃ©crypte pas le format des donnÃ©es par dÃ©faut. Il faut lui prÃ©ciser.

#### **Comment GÃ©rer les RequÃªtes POST dans Express**

Pour gÃ©rer les requÃªtes POST, on doit :

1. Utiliser le middleware `express.urlencoded()` pour analyser le corps de la requÃªte.
2. AccÃ©der aux donnÃ©es en utilisant `req.body`.

**Exemple :**

```javascript
import express from 'express';

const app = express();

// Middleware to parse URL-encoded bodies (from HTML forms)
app.use(express.urlencoded({ extended: true }));

// Route to handle a POST request
app.post('/submit', (req, res) => {
  const username = req.body.username; // Access the 'username' field
  const password = req.body.password; // Access the 'password' field

  // Display the retrieved parameters. 
  // In reality, the data will be processed server-side to interact with the database. 
  // ++We'll see how later.
  res.send(`Received data: Username = ${username}, Password = ${password}`);
});

```

**Explications :**

+ `express.urlencoded({ extended: true })` analyse les donnÃ©es de requÃªte encodÃ©es en URL (gÃ©nÃ©ralement envoyÃ©es par des formulaires HTML).
+ `req.body` contient les donnÃ©es analysÃ©es du corps de la requÃªte.
+ Si le formulaire envoie `username=john&password=123`, `req.body` sera `{ username: 'john', password: '123' }`.

**Cas dâ€™Utilisation pour POST :**

+ Soumission de formulaires (ex. : connexion, inscription).
+ TÃ©lÃ©chargement de fichiers.
+ Envoi de donnÃ©es sensibles (puisquâ€™elles ne sont pas visibles dans lâ€™URL).

---

### **ğŸ“ Exemple coomplet : GÃ©rer un Formulaire avec GET et POST**

Repartons de notre projet *GhibliothÃ¨que* fil rouge de la semaine en y ajoutant un formulaire de recherche (avec GET) et un formulaire d'ajout de film (avec POST).

#### **1ï¸âƒ£ Formulaire HTML (dans un template comme `form.ejs`)**

```html
<!-- form.ejs -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Exemple de Formulaire</title>
</head>
<body>
  <h1>Soumettez Vos Informations</h1>

  <!-- Formulaire GET -->
  <form action="/submit-get" method="GET">
    <label for="get-username">Nom d'utilisateur (GET) :</label>
    <input type="text" id="get-username" name="username">
    <label for="get-password">Mot de passe (GET) :</label>
    <input type="password" id="get-password" name="password">
    <button type="submit">Soumettre avec GET</button>
  </form>

  <!-- Formulaire POST -->
  <form action="/submit-post" method="POST">
    <label for="post-username">Nom d'utilisateur (POST) :</label>
    <input type="text" id="post-username" name="username">
    <label for="post-password">Mot de passe (POST) :</label>
    <input type="password" id="post-password" name="password">
    <button type="submit">Soumettre avec POST</button>
  </form>
</body>
</html>
```

#### **2ï¸âƒ£ Routes Express pour GÃ©rer les Soumissions GET et POST**

```javascript
import express from 'express';

const app = express();

// Middleware pour analyser les corps encodÃ©s en URL
app.use(express.urlencoded({ extended: true }));

// Route pour afficher le formulaire
app.get('/form', (req, res) => {
  res.render('form');
});

// Route pour gÃ©rer la soumission GET du formulaire
app.get('/submit-get', (req, res) => {
  const username = req.query.username;
  const password = req.query.password;

  res.send(`Soumission GET : Nom d'utilisateur = ${username}, Mot de passe = ${password}`);
});

// Route pour gÃ©rer la soumission POST du formulaire
app.post('/submit-post', (req, res) => {
  const username = req.body.username;
  const password = req.body.password;

  res.send(`Soumission POST : Nom d'utilisateur = ${username}, Mot de passe = ${password}`);
});

app.listen(3000, () => {
  console.log('Serveur en cours d\'exÃ©cution sur http://localhost:3000');
});
```

**Explications :**

+ La route `/form` affiche le formulaire.
+ La route `/submit-get` gÃ¨re les soumissions GET (donnÃ©es dans lâ€™URL).
+ La route `/submit-post` gÃ¨re les soumissions POST (donnÃ©es dans le corps de la requÃªte).

---

### **âš ï¸ Points Importants Ã  Retenir**

1. **SÃ©curitÃ© GET vs POST :**
   + **GET nâ€™est pas sÃ©curisÃ©** pour les donnÃ©es sensibles (comme les mots de passe) car les donnÃ©es sont visibles dans lâ€™URL.
   + **POST est plus sÃ©curisÃ©** car les donnÃ©es sont cachÃ©es dans le corps de la requÃªte.

2. **Limites de DonnÃ©es :**
   + Les requÃªtes GET ont des **limites de longueur dâ€™URL** (varie selon le navigateur, gÃ©nÃ©ralement ~2000 caractÃ¨res).
   + Les requÃªtes POST peuvent gÃ©rer des **quantitÃ©s de donnÃ©es plus importantes** (car elles sont envoyÃ©es dans le corps).

3. **Traitement CÃ´tÃ© Serveur :**
   + Si le serveur ne gÃ¨re pas les donnÃ©es GET ou POST, **les donnÃ©es sont ignorÃ©es**.
   + Exemple : Si on envoie une requÃªte GET Ã  `https://example.com/?name=John` mais que le serveur nâ€™utilise pas `req.query.name`, le paramÃ¨tre `name` est ignorÃ©.

4. **Middleware dans Express :**
   + Pour les requÃªtes POST, on **doit** utiliser un middleware comme `express.urlencoded()` ou `express.json()` pour analyser le corps.
   + Sans ce middleware, `req.body` sera `undefined`.

---

### **ğŸš€ Ce Que Jâ€™ai Appris Aujourdâ€™hui**

1. **GET vs POST :**
   + **GET** envoie les donnÃ©es dans lâ€™URL (visible, partageable, moins sÃ©curisÃ©).
   + **POST** envoie les donnÃ©es dans le corps de la requÃªte (cachÃ©, plus sÃ©curisÃ©, pas de limites de taille).

2. **Gestion de GET dans Express :**
   + Utiliser `req.query` pour accÃ©der aux paramÃ¨tres dâ€™URL.

3. **Gestion de POST dans Express :**
   + Utiliser le middleware `express.urlencoded()` pour analyser les donnÃ©es de formulaire.
   + AccÃ©der aux donnÃ©es avec `req.body`.

4. **ConsidÃ©rations de SÃ©curitÃ© :**
   + Ne jamais envoyer de donnÃ©es sensibles (comme les mots de passe) en utilisant GET.
   + Toujours utiliser POST pour les formulaires qui soumettent des informations sensibles.

5. **Lâ€™Importance des Middlewares :**
   + Sans `express.urlencoded()`, les donnÃ©es POST ne seront pas analysÃ©es.
   + Lâ€™ordre des middlewares est important (par exemple, `express.urlencoded()` doit Ãªtre utilisÃ© avant les routes qui ont besoin de `req.body`).
